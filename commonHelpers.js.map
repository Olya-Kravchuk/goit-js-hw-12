{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\n\nconst galleryList = document.querySelector('.gallery');\nlet lightBox = new SimpleLightbox('.gallery-link', {\n  captionsData: \"alt\",\n  captionDelay: 500\n});\n\nexport function galleryTemplate(element) {\n    const {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = element;\n    return `\n   <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <ul class=\"gallery-body\">\n        <li class=\"info-box\">\n          <h3>Likes:</h3>\n          <p>${likes}</p>\n        </li>\n        <li class=\"info-box\">\n          <h3>Views:</h3>\n          <p>${views}</p>\n        </li>\n        <li class=\"info-box\">\n          <h3>Comments:</h3>\n          <p>${comments}</p>\n        </li>\n        <li class=\"info-box\">\n          <h3>Downloads:</h3>\n          <p>${downloads}</p>\n        </li>\n      </ul>\n    </li>`\n}\n\nexport function renderGallery(elements) {\n    const markup = elements.hits.map((element)=>{return galleryTemplate(element)})\n        .join('\\n');\n       \n    galleryList.insertAdjacentHTML('beforeend', markup);\n    \n    lightBox.refresh();   \n}","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getGallery(queryName, page = 1, perPage = 15) {\n\n    const response = await axios.get('', {\n        params: {\n            key: '42112521-3ff4dfc201bab0977369cd2bc',\n            q: queryName,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            page,\n            per_page: perPage\n        }\n    });\n    return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { renderGallery } from \"./js/render-functions.js\";\nimport { getGallery } from \"./js/pixabay-api.js\";\n\nconst form = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet currentPage = 1;\nlet query = '';\nlet totalPages = 0;\nconst perPage = 15;\n\nloadMoreBtn.classList.add('hidden');\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n\n    galleryList.innerHTML = '';\n    query = event.target.elements.query.value.trim();\n\n    if (query === '') {\n        showNotification('Please enter a search query!');\n        return;\n    }\n\n    loader.classList.remove('hidden');\n    currentPage = 1;\n\n    try {\n        const data = await getGallery(query, currentPage);\n        totalPages = Math.ceil(data.totalHits / perPage);\n        loadMoreBtn.classList.remove('hidden');\n        handleGalleryResponse(data);\n    } catch (error) {\n        console.error(error);\n        showNotification('Failed to fetch images');\n    } finally {\n        loader.classList.add('hidden');\n    }\n}\n\nasync function onLoadMore() {\n    loader.classList.remove('hidden');\n    currentPage++;\n\n    try {\n        const data = await getGallery(query, currentPage);\n        handleGalleryResponse(data);\n        smoothScroll();\n    } catch (error) {\n        console.error(error);\n        showNotification('Failed to fetch images');\n    } finally {\n        loader.classList.add('hidden');\n    }\n}\n\nfunction handleGalleryResponse(data) {\n    if (data.hits.length === 0) {\n        showNotification('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n        renderGallery(data);\n    }\n\n    if (currentPage >= totalPages) {\n        loadMoreBtn.classList.add('hidden');\n        if (currentPage > totalPages) {\n            showNotification(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } else {\n        loadMoreBtn.classList.remove('hidden');\n    }\n}\n\nfunction showNotification(message) {\n    iziToast.show({\n        message: message,\n        messageColor: '#fff',\n        backgroundColor: '#FF0000',\n        position: 'topRight',\n    });\n}\n\nfunction smoothScroll() {\n    const galleryItemHeight = document.querySelector('.gallery-item').offsetHeight;\n    window.scrollBy({\n        top: galleryItemHeight * 2,\n        left: 0,\n        behavior: 'smooth'\n    });\n}"],"names":["galleryList","lightBox","SimpleLightbox","galleryTemplate","element","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","elements","markup","axios","getGallery","queryName","page","perPage","form","loader","loadMoreBtn","currentPage","query","totalPages","onFormSubmit","onLoadMore","event","showNotification","data","handleGalleryResponse","error","smoothScroll","message","iziToast","galleryItemHeight"],"mappings":"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"}